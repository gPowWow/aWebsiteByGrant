<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Grant Powell - Cochlear Implants and Speech Perception</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Grant Powell</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data-visualization" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Data Visualization</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data-visualization">    
        <li>
    <a class="dropdown-item" href="./assignment1.html" rel="" target="">
 <span class="dropdown-text">Assignment 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assignment2.html" rel="" target="">
 <span class="dropdown-text">Assignment 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assignment3.html" rel="" target="">
 <span class="dropdown-text">Assignment 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assignment4.html" rel="" target="">
 <span class="dropdown-text">Assignment 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assignment5.html" rel="" target="">
 <span class="dropdown-text">Assignment 5</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assignment6.html" rel="" target="">
 <span class="dropdown-text">Assignment 6</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assignment7.html" rel="" target="">
 <span class="dropdown-text">Assignment 7</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assignment8.html" rel="" target="">
 <span class="dropdown-text">Assignment 8</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assignment9.html" rel="" target="">
 <span class="dropdown-text">Assignment 9</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assignment10.html" rel="" target="">
 <span class="dropdown-text">Assignment 10</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./project.html" rel="" target="">
 <span class="dropdown-text">Project</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-ux-design" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">UX Design</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-ux-design">    
        <li>
    <a class="dropdown-item" href="./hotel_website_redesign.html" rel="" target="">
 <span class="dropdown-text">Hotel Website Redesign</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./easy_internet_app.html" rel="" target="">
 <span class="dropdown-text">Easy Internet App</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./ride_saver_app.html" rel="" target="">
 <span class="dropdown-text">RideSaver App</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-accessibility" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Accessibility</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-accessibility">    
        <li>
    <a class="dropdown-item" href="./closed_caption_1.html" rel="" target="">
 <span class="dropdown-text">HCI 1 Research</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./presentation_1.html" rel="" target="">
 <span class="dropdown-text">Text Captioning and Speech Perception</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./clear_speech.html" rel="" target="">
 <span class="dropdown-text">Clear Speech</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./presentation_2.html" rel="" target="">
 <span class="dropdown-text">Cochlear Implants and Speech Perception</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./closed_caption_2.html" rel="" target="">
 <span class="dropdown-text">Speech Perception Research</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./perception_proposal.html" rel="" target="">
 <span class="dropdown-text">Perception Research Proposal</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-cybersecurity" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Cybersecurity</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-cybersecurity">    
        <li>
    <a class="dropdown-item" href="./policy_paper.html" rel="" target="">
 <span class="dropdown-text">Policy Paper on Oversharing</span></a>
  </li>  
        <li class="dropdown-header">cognitive_social_biases.qmd</li>
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./posts.html" rel="" target="">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/grant-powell-08703237" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#summary-of-presentation-of-comparison-of-speech-recognition-in-cochlear-implant-patients-with-and-without-residual-hearing-a-review-of-indications" id="toc-summary-of-presentation-of-comparison-of-speech-recognition-in-cochlear-implant-patients-with-and-without-residual-hearing-a-review-of-indications" class="nav-link active" data-scroll-target="#summary-of-presentation-of-comparison-of-speech-recognition-in-cochlear-implant-patients-with-and-without-residual-hearing-a-review-of-indications">Summary of Presentation of “Comparison of Speech Recognition in Cochlear Implant Patients with and without Residual Hearing: A Review of Indications”</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Cochlear Implants and Speech Perception</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<iframe src="https://1drv.ms/p/c/db1e0516f0b030ec/IQPsMLDwFgUeIIDb8RsAAAAAAdlDxajkEB5RcbLlIS5yqTg?em=2&amp;wdAr=1.7777777777777777" width="800px" height="300px" frameborder="0">This is an embedded <a target="_blank" href="https://office.com">Microsoft Office</a> presentation, powered by <a target="_blank" href="https://office.com/webapps">Office</a>.</iframe>
<section id="summary-of-presentation-of-comparison-of-speech-recognition-in-cochlear-implant-patients-with-and-without-residual-hearing-a-review-of-indications" class="level2">
<h2 class="anchored" data-anchor-id="summary-of-presentation-of-comparison-of-speech-recognition-in-cochlear-implant-patients-with-and-without-residual-hearing-a-review-of-indications">Summary of Presentation of “Comparison of Speech Recognition in Cochlear Implant Patients with and without Residual Hearing: A Review of Indications”</h2>
<p>The research study by Gayane Sargsyan, Natalie Kansan, Thomas Lenard, and Anke Lewinsky-Schiedat titled “Comparison of Speech Recognition in Cochlear Implant Patients with and without Residual Hearing: A Review of Indications” tested the research hypothesis stating that speech recognition performance across patients with varying levels of low-frequency residual hearing will improve, post-operatively, after cochlear implantation (CI), in comparison to pre-operative performance from the use of hearing aids (HA). This was done by evaluating the effectiveness of CI on the speech recognition outcomes of patients with various degrees of residual low-frequency hearing and it involved a pre-test and post-test. The pre-test tested speech recognition performance from the use of HA and the post-test tested speech recognition performance from the use of their newly implanted CI. The rationale for testing this hypothesis was based on some successful documented outcomes from the research literature of using a CI strategy called electro-acoustic stimulation (EAS).</p>
<p>EAS involves both a CI and a HA in the same ear. First, the CI electrode is inserted, not all the way into the entire cochlea, but just enough to provide electrical stimulation for the area of the cochlea associated with high frequency sounds, which is where most of the hearing loss is located in patients who wear a CI. Second, a HA is fitted to provide the necessary amplification needed for the residual low frequency hearing that exists by improving its hearing threshold, which is how loud sound or speech has to be for a person to notice it. Because EAS has been found to provide benefits to patients with high frequency hearing loss, but with substantial residual low-frequency hearing remaining, it was important for the researchers in the study to test their hypothesis to determine how much benefit could be provided to patients with this type of hearing loss. Mainly, to determine if that benefit could ever be considered significant enough amongst the audiology community to expand CI recommendations to patients with more residual low frequency hearing remaining than is commonly found in patients who typically qualify as a candidate for CI. Let’s look at the design of the study to determine how they attempted to reach their goal and test the hypothesis.</p>
<p>The research study was experimented on 174 adult CI subjects older than 18 years of age at implantation. Their ages varied widely and ranged from 18 years to 70+ years. The subjects were divided into three groups. However, instead of one whole experiment, each group tested was an independent experiment meaning that it was three experiments total.</p>
<p>Instead of an Analysis of Variance (ANOVA) being performed to compare more than two treatment groups to determine, say, which group performed better on speech recognition performance, each group experiment was a within-subjects, or repeated-measures, design. This meant that, as mentioned earlier, a pre-test and post-test was implemented for each group by assessing their pre-operative speech recognition performance with a HA vs.&nbsp;their post-operative speech recognition performance with a CI. Group A subjects had a hearing threshold at each frequency during a pure tone audiometry (PTA) of greater than 80dB for hearing loss in both ears. Group B subjects had a hearing threshold during a PTA where they could hear low-frequency sounds of 250 and 500 Hz at less than or equal to 80 dB, but 1000, 2000, 4000, and 8000 Hz at greater than 80 dB in both ears. Group C subjects had a hearing threshold during a PTA where they could hear low-frequency sounds of 250 and 500 Hz at less than or equal to 60 dB, but 1000, 2000, 4000, and 8000 Hz at greater than 75 dB in both ears. Speech recognition performance, being the dependent variable, was tested using two independent variables, which were the Freiburg monosyllabic test (FMS) presented at 65 dB in a quiet setting and the Hochmair-Schulz-Moser test (HSM) for sentence understanding presented at 65 dB in a quiet setting at 0o azimuth (S0N0) and in a noisy setting with a 10 dB signal-to-noise ratio (SNR). There were some significant results discovered from each group’s performance on their pre- and post-tests.</p>
<p>With a paired t-test, a statistically significant increase in speech recognition scores, post-operatively, was found in groups A and B with probability-values less than 0.05 (p &lt; 0.05). With another paired t-test, 13 of the 25 subjects in group C with EAS performed significantly better, post-operatively, than with HA before surgery with p &lt; 0.05. Basically, group C had a subgroup within it where half of the 25 subjects successfully had their low-frequency residual hearing preserved to be set up with a CI that provided EAS, whereas everybody in group C and everybody in group A and B were set up with a CI with only electrical stimulation. With an unpaired t-test, the same 13 subjects in group C with EAS showed significantly better speech understanding with EAS than everybody else with, electrical stimulation only, with p &lt; 0.05. Pre-operatively, with HA, the mean monosyllabic word score for part of group C that received EAS was 29.6% with a standard deviation (SD) of + or – 26.3. However, when that same group received EAS, post-operatively, their monosyllabic word score was 69.2% with a SD of + or – 18.0 while everybody else who received only electrical stimulation after surgery scored lower at 50.4% with a SD of + or – 26.6. Finally, there was a significant difference found in the mean speech recognition performance of all subjects in the CI only groups and subjects listening with EAS. The researchers interpreted these results in various ways.</p>
<p>They point out that the results show that CI provide significant improvement in speech recognition in both quiet and noisy settings for subjects with bilateral hearing loss, which is both ears, and non-functional low frequency residual hearing, which is residual hearing that is probably never accessed often in daily situations because it would require speech to be spoken at decibels higher than commonly found in most speaking situations. However, this interpretation is not conclusive for a few reasons.</p>
<p>One, the results are based on data obtained from patients in one CI clinic over one year. Second, the results were not organized based on etiology of deafness, age of onset of hearing loss, or age at time of implantation. For example, there were patients mixed within the groups who had congenital prelingual hearing loss instead of post-lingual progressive hearing loss and who were also older than 70 years of age. This means that it would not be fair to compare the performance of subjects with prelingual hearing loss vs.&nbsp;those with post-lingual progressive hearing loss because potential disparities in their speech and language comprehension and acquisition skills could be playing more of a role in their speech recognition performance. Moreover, cognitive functioning levels in subjects older than 70 years of age could potentially be affecting speech recognition performance, as well. The researchers also pointed out, based on improved speech understanding demonstrated through the FMS test with electrical stimulation post-operatively vs.&nbsp;pre-operatively in group C, that a short, implanted electrode array might be more beneficial than standard length electrodes because a short electrode array was used in group C, whereas a standard-length one was used in groups A and B.</p>
<p>It is uncertain what to make of this other than the possibility that this emphasizes that high frequency hearing provided through electrical stimulation is better than inefficient acoustic stimulation that is no longer providing any benefit in patients with higher frequency profound hearing loss. The researchers also concluded that the, overall, improvement in speech recognition performance in the EAS subgroup within group C emphasizes the importance of acoustic low-frequency amplification rather than electrical low-frequency stimulation.</p>
<p>This also highlights that patients with low frequency residual hearing and who receive poor benefit from only acoustic amplification through HA may benefit greatly from EAS in daily noisy communication settings. Finally, the researchers concluded from the results that EAS leads to further increased dimension of speech understanding in hearing impaired patients based on improved speech understanding performance amongst patients with the most residual low-frequency hearing with EAS vs.&nbsp;only CI, or HA alone preoperatively.</p>
<p>Overall, the results have provided the researchers a clear idea of what future research could be done and recommendations that should be considered. One recommendation is for future research to further explore the issue and effectiveness of bimodal hearing, which is both ears by fitting a HA in one ear and a CI in the other. And evaluate the results of preoperative bilaterally fitted HA, which are HA in both ears, to clearly outline CI recommendations for patients with useable low-frequency hearing. That way there is a comparison between those strategies vs.&nbsp;the effectiveness of EAS that can further be contributed to the research literature. A second recommendation is to prioritize patients with bilateral severe hearing loss for CI due to the potential for significant improvement in speech understanding in noise for those with low-frequency residual hearing through EAS, while at the same time, acknowledging the potential risks of surgery. A final recommendation is for research to explore the cost effectiveness of CI in patients with low-frequency residual hearing. I would like to add in my recommendations as well.</p>
<p>I also think research should focus on CI brands made by various companies or compare them because in the research study various CI were used by the subjects. This was not touched on much in the study, but it may have affected the results of the study. It is hard to say. It would also be a good idea to research or continue researching other various residual hearing levels with EAS. It would also be good to examine how much residual hearing can actually be preserved due to the fact that many of the subjects in the study had low-frequency residual hearing, pre-operatively, but for some reason not elaborated in the study, they no longer had any residual hearing, post-operatively, even though this study had sought out to compare the speech recognition performance with residual hearing with HA vs.&nbsp;residual hearing with EAS. It would also be good idea to continue looking for ways to improve the speech recognition performance in patients with EAS in noisy settings because, while the scores showed significant improvement post-operatively, they were still relatively low. Finally, research or further research should also be conducted on whether memory of how certain sounds and pitches sounded with low-frequency residual hearing, or residual hearing in general, can aid in quicker adaptability to a CI.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>